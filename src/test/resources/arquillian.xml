<?xml version="1.0" encoding="UTF-8"?>
<arquillian xmlns="http://jboss.org/schema/arquillian" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="
        http://jboss.org/schema/arquillian
        http://www.jboss.org/schema/arquillian/arquillian_1_0.xsd">
  <container qualifier="jbossas-remote" default="false">
    <configuration>
      <property name="managementAddress">${jboss.managementAddress:localhost}</property>
      <property name="managementPort">${jboss.managementPort:9990}</property>
      <property name="username">${jboss.user}</property>
      <property name="password">${jboss.password}</property>
    </configuration>
  </container>

  <container qualifier="jbossas-managed" default="false">
    <configuration>
      <property name="allowConnectingToRunningServer">true</property>
      <property name="managementPort">${jboss.managementPort:9990}</property>
      <property name="username">${jboss.user}</property>
      <property name="password">${jboss.password}</property>
      <property name="serverConfig">standalone-full.xml</property>
      <property name="jbossHome">${jboss.home}</property>
      <property name="startupTimeoutInSeconds">240</property>
      <property name="javaVmArguments">-server -Xms64m -Xmx512m -XX:+UseG1GC -XX:MetaspaceSize=96M -XX:MaxMetaspaceSize=256m -Djava.net.preferIPv4Stack=true -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Dactivemq.artemis.client.global.thread.pool.max.size=30 -agentlib:jdwp=transport=dt_socket,address=8787,server=y,suspend=n</property>
    </configuration>
  </container>

  <extension qualifier="jacoco">
    <property name="includes">x1.*</property>
  </extension>

  <extension qualifier="docker">
    <property name="serverVersion">1.24</property>
    <property name="serverUri">http://localhost:2375</property>
    <property name="connectionMode">STARTANDSTOP</property>
    <property name="definitionFormat">CUBE</property>
    <property name="dockerContainers">
      jbossas-remote:
        buildImage:
          dockerfileLocation: src/main/docker/integration-tests
          remove: true
        exposedPorts: [8080/tcp, 9990/tcp]
        portBindings: [8080/tcp, 9990/tcp]
        await:
          strategy: sleeping
          sleepTime: 20 s
          stdErr: true
          stdOut: true
        env: [ MANAGEMENT=public HTTP=public ]
      </property>
  </extension>
</arquillian>
