<?xml version="1.0" encoding="UTF-8"?>
<arquillian xmlns="http://jboss.org/schema/arquillian" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://jboss.org/schema/arquillian
        http://jboss.org/schema/arquillian/arquillian_1_0.xsd">
        
    <container qualifier="jbossas-remote" default="false">
        <configuration>
            <property name="managementAddress">${jboss.managementAddress}</property>
            <property name="managementPort">${jboss.managementPort}</property>
            <property name="username">${jboss.user}</property>
            <property name="password">${jboss.password}</property>
        </configuration>
    </container>

    <container qualifier="jbossas-managed" default="false">
        <configuration>
            <property name="allowConnectingToRunningServer">true</property>
            <property name="username">${jboss.user}</property>
            <property name="password">${jboss.password}</property>
            <property name="serverConfig">standalone-full.xml</property>
            <property name="jbossHome">${jboss.home}</property>
            <property name="javaVmArguments">-Xms768m -Xmx768m -Djava.net.preferIPv4Stack=true -Xdebug -Xrunjdwp:transport=dt_socket,address=8787,server=y,suspend=n</property>
        </configuration>
    </container>

    <extension qualifier="jacoco">
        <property name="includes">x1.*</property>
    </extension>

    <extension qualifier="docker">
        <property name="serverVersion">1.18</property>
        <property name="serverUri">http://localhost:2375</property>
        <property name="connectionMode">STARTANDSTOP</property>
        <property name="dockerContainers">
          jbossas-remote:
            image: j7beck/x1-wildfly-slot0
            exposedPorts: [8080/tcp, 9990/tcp]
            attachStdin: true
            attachStderr: true
            await:
              strategy: sleeping
              sleepTime: 15s
            env: [ MANAGEMENT=public ]
            portBindings: [8080/tcp, 9990/tcp]
            volumes:
              - /opt/x1/docker/docker.key:/etc/pki/tls/private/node.key:ro
              - /opt/x1/docker/docker.crt:/etc/pki/tls/certs/node.crt:ro
      </property>
    </extension>
</arquillian>
